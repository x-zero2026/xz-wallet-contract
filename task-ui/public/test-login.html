<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµ‹è¯•ç™»å½• - XZ ä»»åŠ¡ä¸­å¿ƒ</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .card {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 20px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    textarea {
      min-height: 80px;
      font-family: monospace;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #1890ff;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background: #40a9ff;
    }
    .info {
      background: #e6f7ff;
      border: 1px solid #91d5ff;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      font-size: 14px;
      color: #0050b3;
    }
    .success {
      background: #f6ffed;
      border: 1px solid #b7eb8f;
      color: #389e0d;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ§ª æµ‹è¯•ç™»å½•</h1>
    
    <div class="info">
      æ­¤é¡µé¢ç”¨äºæµ‹è¯•ä»»åŠ¡ä¸­å¿ƒçš„ç™»å½•åŠŸèƒ½ã€‚å¡«å†™ç”¨æˆ·ä¿¡æ¯åç‚¹å‡»"æ¨¡æ‹Ÿç™»å½•"ï¼Œå°†è‡ªåŠ¨è®¾ç½® localStorage å¹¶è·³è½¬åˆ°ä»»åŠ¡ä¸­å¿ƒã€‚
    </div>

    <form id="loginForm">
      <div class="form-group">
        <label>JWT Token *</label>
        <textarea id="token" required>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkaWQiOiIweDMwNzBkZWIxYzE3NDMyYjA5NGQzMDUwOWNjYmZkNTk4ZmIyNzkzNDM1ZWZkY2E5MjczZGZiYzU1OGJjMDQwY2EiLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNzY5NTEzNTg2LCJpYXQiOjE3Njk0MjcxODZ9.xFST95uXdhMYbCy7p_B9BVR1FRqPzeDEDHPxNY8Rv4Q</textarea>
      </div>

      <div class="form-group">
        <label>DID *</label>
        <input type="text" id="did" value="0x3070deb1c17432b094d30509ccbfd598fb2793435efdca9273dfbc558bc040ca" required>
      </div>

      <div class="form-group">
        <label>ç”¨æˆ·å *</label>
        <input type="text" id="username" value="admin" required>
      </div>

      <div class="form-group">
        <label>ä»¥å¤ªåŠåœ°å€ *</label>
        <input type="text" id="eth_address" value="0x8766E5c6c7311519187328Ebe31fD63C4b88A9cA" required>
      </div>

      <div class="form-group">
        <label>é‚®ç®±</label>
        <input type="email" id="email" value="x-zero2026@outlook.com">
      </div>

      <div class="form-group">
        <label>é¡¹ç›® ID</label>
        <input type="text" id="project_id" value="00000000-0000-0000-0000-000000000000">
      </div>

      <button type="submit">ğŸš€ æ¨¡æ‹Ÿç™»å½•å¹¶è·³è½¬</button>
    </form>

    <button onclick="clearStorage()" style="background: #ff4d4f; margin-top: 10px;">
      ğŸ—‘ï¸ æ¸…é™¤ç™»å½•ä¿¡æ¯
    </button>
  </div>

  <script>
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const token = document.getElementById('token').value.trim();
      const userInfo = {
        did: document.getElementById('did').value.trim(),
        username: document.getElementById('username').value.trim(),
        eth_address: document.getElementById('eth_address').value.trim(),
        email: document.getElementById('email').value.trim(),
        project_id: document.getElementById('project_id').value.trim()
      };

      // éªŒè¯å¿…å¡«å­—æ®µ
      if (!token || !userInfo.did || !userInfo.username || !userInfo.eth_address) {
        alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼ˆæ ‡è®° * çš„ï¼‰');
        return;
      }

      // å­˜å‚¨åˆ° localStorage
      localStorage.setItem('token', token);
      localStorage.setItem('userInfo', JSON.stringify(userInfo));

      // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
      const info = document.querySelector('.info');
      info.className = 'info success';
      info.textContent = 'âœ… ç™»å½•ä¿¡æ¯å·²ä¿å­˜ï¼æ­£åœ¨è·³è½¬åˆ°ä»»åŠ¡ä¸­å¿ƒ...';

      // å»¶è¿Ÿè·³è½¬
      setTimeout(() => {
        window.location.href = '/';
      }, 1000);
    });

    function clearStorage() {
      localStorage.removeItem('token');
      localStorage.removeItem('userInfo');
      alert('âœ… ç™»å½•ä¿¡æ¯å·²æ¸…é™¤');
    }

    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
    window.addEventListener('load', function() {
      const token = localStorage.getItem('token');
      const userInfo = localStorage.getItem('userInfo');
      
      if (token && userInfo) {
        const info = document.querySelector('.info');
        info.className = 'info success';
        info.innerHTML = 'âœ… æ£€æµ‹åˆ°å·²ç™»å½•<br>Token: ' + token.substring(0, 50) + '...<br>ç”¨æˆ·: ' + JSON.parse(userInfo).username;
      }
    });
  </script>
</body>
</html>
